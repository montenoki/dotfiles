# ~/.config/sway/conf.d/50-idle.conf
# 配置节电休眠

set $lockcmd swaylock -f
set $dpms_off swaymsg "output * dpms off"
set $dpms_on  swaymsg "output * dpms on"

# 时间（秒）：按需改
set $t_lock      300
set $t_dpms_off  600
set $t_suspend  1200
set $t_hibernate 3600

exec_always --no-startup-id sh -c 'pkill -x swayidle 2>/dev/null; true'

# 默认会尊重 idle inhibitor（不要加 --ignore-inhibit）
exec_always --no-startup-id swayidle -w \
  timeout $t_lock      '$lockcmd' \
  timeout $t_dpms_off  '$dpms_off' resume '$dpms_on' \
  timeout $t_suspend   'systemctl suspend' \
  timeout $t_hibernate 'systemctl hibernate' \
  before-sleep '$lockcmd'
